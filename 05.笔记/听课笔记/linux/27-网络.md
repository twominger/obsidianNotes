# 网络层协议及IP

IP地址是网络设备设备的标识

IP地址表示

二进制，32bit，00000000 11111111

十进制，0~255



子网掩码：网络位+主机位 连续的‘ 1 ’ + 连续的‘ 0 ’

IP地址的分类：

1、网络地址

​	IP and 掩码

2、可用地址

​	

3、广播地址

​	主机位全为1

​	表示网段内所有的主机都是处理的目标

prifix

0000 0000 0      /24

1000 0000 128  /

1100 0000 192

1110 0000 224

1111 0000 240

1111 1000 248

1111 1100 252

1111 1110 254

IP地址分类

A类 255.0.0.0

第一位固定为0

网络号



B类 255.255.0.0

前两位固定为10



C类 255.255.255.0

前三位固定为110



D类 

前四位固定为1110



E类

前四位固定为1111





0000 0000

/25

192.168.1.0

192.168.1.1~192.168.1.126

192.168.1.127



/26

192.168.1.128

192.168.1.129~192.168.1.190

192.168.1.191



/28

192.168.1.192

192.168.1.193~192.168.1.206

192.168.1.207

剩余

/28

192.168.1.208

192.168.1.224

192.168.1.240



128 64 16



# ICMP：因特网控制消息协议

主要提供网络信息探测、检查、故障排查等功能

ping 、tracert

通过echo request 报文发起请求

通过echo reply 报文回复请求

route print





缺省路由，用在网络终端、或网络的末节设备、企业网络的出口





交换机的分类：

1、二层交换机：主要是提供了大量的终端接口

2、三层交换机：



CSMA/CD 载波监听多路访问/冲突检测

1、先听后发

2、边听边发

3、冲突停发

4、随机时间重发



冲突域：交换机

广播域：



MAC地址：唯一标识网络设备

构成：

OUI（厂商代码）：由IEEE组织给厂商分配的MAC地址前缀

厂商流水编号：







MAC地址表项的生成

静态

mac-address static 1212-1212-1212 g 0/0/1 vlan 1

指定SMAC地址为1212的数据必须从0/0/1接口丢弃

如果从其他接口接收到SMAC为1212则直接丢弃



动态：设备根据收到的数据自动生成

静态MAC地址表项不会老化，设备重启后依然存在

动态MAC地址表项老化时间为300s，重启数据清空





交换机的处理行为

1、转发：

收到的已知单播帧（数据在DMAC地址表项中）交换机会根据MAC地址表项的记录进行转发

2、丢弃：

收到的数据帧的SMAC地址匹配静态MAC，但是接口不匹配

收到数据帧的SMAC或DMAC匹配黑洞MAC

3、泛洪：

收到的 未知单播帧、组播帧、广播帧

向其他所有接口发送

![{8FBB78F0-D939-4FF1-B163-987F945F0C07}.png](https://notes-ming.oss-cn-beijing.aliyuncs.com/images/20250109044656864.png)



因为交换机存在泛洪机制，所以在二层网络过大时，会导致大量未知单播帧、组播帧、广播帧的泛洪，大量的泛洪操作就会引发 链路带宽使用率降低，设备性能降低，用户体验降低



VLAN ：虚拟局域网，



vlan 0 : 主要用于调用优先级

vlan 4095 ：保留使用





[LSW2]interface g0/0/1

[LSW2-GigabitEthernet0/0/1]port link-type hybrid

[LSW2-GigabitEthernet0/0/1]port hybrid pvid vlan 30

[LSW2-GigabitEthernet0/0/1]port hybrid untagged vlan 10 20 30

[LSW2-GigabitEthernet0/0/1]quit





不同网段，不同VLAN间通信

